<div class="solicitud-container">
  <mat-card class="solicitud-card">
    <mat-card-title>Datos Solicitud</mat-card-title>
    <mat-card-content>
      <form [formGroup]="solicitudForm">
        <div class="form-group">
          <mat-form-field class="form-field">
            <mat-label>R.U.N</mat-label>
            <input matInput placeholder={{usuario?.rut}} formControlName="run" />
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Nombres</mat-label>
            <input matInput placeholder={{usuario?.nombres}} formControlName="nombres" />
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Apellidos</mat-label>
            <input matInput placeholder="" formControlName="apellidos" />
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Fecha creacion</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="fechaCreacion">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker to #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="form-group-horizontal">
          <mat-card-subtitle>Datos de la Empresa</mat-card-subtitle>
        </div>

        <div class="form-group">

          <mat-form-field class="form-field">
            <mat-label>RUT</mat-label>
            <input matInput placeholder="" formControlName="rutEmpresa" />
            <mat-error *ngIf="solicitudForm.get('rutEmpresa')?.hasError('required')">
              El RUT es obligatorio.
            </mat-error>
            <mat-error *ngIf="solicitudForm.get('rutEmpresa')?.hasError('invalidRut')">
              El RUT no es válido.
            </mat-error>
          </mat-form-field>
          <button mat-raised-button color="primary" (click)="buscarEmpresaPorRut()">buscar</button>
          </div>


        <div class="form-group">
          <mat-form-field class="form-field">
            <mat-label>Razón Social</mat-label>
            <input matInput placeholder="" formControlName="razonSocial" />
          </mat-form-field>
        </div>


        <mat-card-subtitle>Comuna donde se realiza la actividad laboral</mat-card-subtitle>
        <div class="form-group">
          <mat-form-field class="form-field">
            <mat-label>Dirección</mat-label>
            <input matInput placeholder="" formControlName="direccion" />
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Región</mat-label>            
              <input matInput placeholder="" formControlName="region" />          
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Comuna</mat-label>
              <input matInput placeholder="" formControlName="comuna" />           
          </mat-form-field>
        </div>

        <mat-card-subtitle> Actividad Económica </mat-card-subtitle>
        <div class="form-group">
          <mat-form-field class="form-field">
            <mat-label>Código</mat-label>
            <mat-select formControlName="actividadEconomica">
              <mat-option *ngFor="let actividad of actividades" [value]="actividad">{{ actividad }}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Descripción</mat-label>
            <input matInput placeholder="PRESTACION DE SERVICIOS" formControlName="descripcion" />
          </mat-form-field>
        </div>

        <mat-divider></mat-divider>

        <mat-card-subtitle>Datos trabajadores</mat-card-subtitle>
        <div class="form-group">

          <mat-table [dataSource]="trabajadores" class="mat-table">
            <!-- Columns definitions -->
            <ng-container matColumnDef="rut">
              <mat-header-cell *matHeaderCellDef> RUT </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.rut}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="nombre">
              <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.nombre}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="edad">
              <mat-header-cell *matHeaderCellDef> Edad </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.edad}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="descargar">
              <mat-header-cell *matHeaderCellDef> Descargar </mat-header-cell>
              <mat-cell *matCellDef="let element">
                <button mat-button color="primary">Descargar</button>
              </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          </mat-table>
        </div>

        <div class="button-group">
          <button mat-raised-button color="primary">Agregar Trabajador</button>
        </div>
        <mat-card-subtitle>Batería de examen</mat-card-subtitle>
        <mat-divider></mat-divider>
        <div class="form-group">
          <mat-form-field class="form-field">
            <mat-label>Tipo Batería</mat-label>
            <input matInput />
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Agentes Neumoconiógenos</mat-label>
            <input matInput />
          </mat-form-field>
        </div>

        <mat-divider></mat-divider>

        <mat-card-subtitle>Exámenes de la batería</mat-card-subtitle>
        <div class="form-group">

          <mat-table [dataSource]="examenes" class="mat-table">
            <!-- Columns definitions for Examenes -->
            <ng-container matColumnDef="nombre">
              <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.nombre}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="recomendacion">
              <mat-header-cell *matHeaderCellDef> Recomendación </mat-header-cell>
              <mat-cell *matCellDef="let element">
                <button mat-button color="primary">Ver recomendaciones</button>
              </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="examColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: examColumns;"></mat-row>
          </mat-table>
        </div>
        <div class="button-group">
          <button mat-raised-button color="primary" type="submit">Crear Solicitud</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>